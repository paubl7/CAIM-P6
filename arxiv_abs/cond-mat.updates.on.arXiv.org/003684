We derive the exact analytic insulator ground states of the projected Hamiltonian of magic-angle
twisted bilayer graphene (TBG) flat bands with Coulomb interactions in various limits, and study
the perturbations moving away from these limits. We define the (first) chiral limit where the AA
stacking hopping is zero, and a flat limit with exactly flat single-particle bands. In the chiral-flat
limit, the TBG Hamiltonian has a U(4)$\times$U(4) symmetry, and we find that the exact ground states
at integer filling $-4\le \nu\le 4$ relative to charge neutrality are Chern insulators of Chern
numbers $\nu_C=4-|\nu|,2-|\nu|,\cdots,|\nu|-4$, all of which are degenerate. This confirms
recent experiments where Chern insulators are found to be competitive low-energy states of TBG.
When the chiral-flat limit is reduced to the nonchiral-flat limit which has a U(4) symmetry, we find
$\nu=0,\pm2$ has exact ground states of Chern number $0$, while $\nu=\pm1,\pm3$ has perturbative
ground states of Chern number $\nu_C=\pm1$, all of which are U(4) ferromagnetic. In the chiral-nonflat
limit which has a different U(4) symmetry, different Chern number states are degenerate up to second
order perturbations. When further reduced to the realistic nonchiral-nonflat case, we find the
perturbative ground states at all integer fillings $\nu$ to be in-plane valley polarized (Chern)
insulators, which are thus intervalley coherent. At certain value of out-of-plane magnetic field
$|B|>0$, a first-order phase transition for $\nu=\pm1,\pm2$ from Chern number $\nu_C=\text{sgn}(\nu
B)(2-|\nu|)$ to $\nu_C=\text{sgn}(\nu B)(4-|\nu|)$ is expected, which agrees with recent experimental
observations. Lastly, we show that the TBG Hamiltonian reduces into an extended Hubbard model in
the stabilizer code limit. 