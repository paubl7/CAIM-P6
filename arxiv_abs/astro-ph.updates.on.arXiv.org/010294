Context. Observationally constraining the atmospheric temperature-pressure (TP) profile of
exoplanets is an important step forward for improving planetary atmosphere models, further enabling
one to place the detection of spectral features and the measurement of atomic and molecular abundances
through transmission and emission spectroscopy on solid ground. Aims. The aim is to constrain the
TP profile of the ultra-hot Jupiter KELT-9b by fitting synthetic spectra to the observed H$\alpha$
and H$\beta$ lines and identify why self-consistent planetary TP models are unable to fit the observations.
Methods. We construct 126 one-dimensional TP profiles varying the lower and upper atmospheric
temperatures, as well as the location and gradient of the temperature rise. For each TP profile,
we compute transmission spectra of the H$\alpha$ and H$\beta$ lines employing the Cloudy radiative
transfer code, which self-consistently accounts for non-local thermodynamic equilibrium (NLTE)
effects. Results. The TP profiles leading to best fit the observations are characterised by an upper
atmospheric temperature of 10000-11000 K and by an inverted temperature profile at pressures higher
than 10$^{-4}$ bar. We find that the assumption of local thermodynamic equilibrium (LTE) leads
to overestimate the level population of excited hydrogen by several orders of magnitude, and hence
to significantly overestimate the strength of the Balmer lines. The chemical composition of the
best fitting models indicate that the high upper atmospheric temperature is most likely driven
by metal photoionisation and that FeII and FeIII have comparable abundances at pressures lower
than 10$^{-6}$ bar, possibly making the latter detectable. Conclusions. Modelling the atmospheres
of ultra-hot Jupiters requires one to account for metal photoionisation. [abridged] 