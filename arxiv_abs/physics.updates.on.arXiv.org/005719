The Hegselmann-Krause (HK) model allows one to characterize the continuous change of agents' opinions
with the bounded confidence threshold $\varepsilon$. To consider the heterogeneity of agents
in characteristics, we study the HK model on homogeneous and heterogeneous networks by introducing
a kind of smart agent. Different from the averaging rule in opinion update of HK model, smart agents
will consider, in updating their opinions, the environmental influence following the fact that
an agent's behavior is often coupled with environmental changes. The environment is characterized
by a parameter that represents the biased resource allocation between different cliques. We focus
on the critical behavior of the underlying system. A phase transition point separating a complete
consensus from the coexistence of different opinions is identified, which occurs at a critical
value $\varepsilon_c$ for the bounded confidence threshold. We state analytically that $\varepsilon_c$
can take only one of two possible values, depending on the behavior of the average degree $k_a$ of
a social graph, when agents are homogeneous in characteristics. Results also suggest that the phase
transition point weakly depends on the network structure but is strongly correlated with the fraction
of smart agents and the environmental parameter. We finally establish the finite size scaling law
that stresses the role that the system size has in the underlying opinion dynamics. Meanwhile, introducing
smart agents does not change the functional dependence between the time to reach a complete consensus
and the system size. However, it can drive a complete consensus to be reached faster, for homogeneous
networks that are far from the mean field limit. 