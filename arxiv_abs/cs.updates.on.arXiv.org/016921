As a new type of e-commerce platform developed in recent years, local consumer service platform
provides users with software to consume service to the nearby store or to the home, such as Groupon
and Koubei. Different from other common e-commerce platforms, the behavior of users on the local
consumer service platform is closely related to their real-time local context information. Therefore,
building a context-aware user behavior prediction system is able to provide both merchants and
users better service in local consumer service platforms. However, most of the previous work just
treats the contextual information as an ordinary feature into the prediction model to obtain the
prediction list under a specific context, which ignores the fact that the interest of a user in different
contexts is often significantly different. Hence, in this paper, we propose a context-aware heterogeneous
graph attention network (CHGAT) to dynamically generate the representation of the user and to estimate
the probability for future behavior. Specifically, we first construct the meta-path based heterogeneous
graphs with the historical behaviors from multiple sources and comprehend heterogeneous vertices
in the graph with a novel unified knowledge representing approach. Next, a multi-level attention
mechanism is introduced for context-aware aggregation with graph vertices, which contains the
vertex-level attention network and the path-level attention network. Both of them aim to capture
the semantic correlation between information contained in the graph and the outside real-time
contextual information in the search system. Then the model proposed in this paper aggregates specific
graphs with their corresponding context features and obtains the representation of user interest
under a specific context and input it into the prediction network to finally obtain the predicted
probability of user behavior. 